<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>End</title>
    <link rel="stylesheet" as="style" crossorigin 
          href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Pretendard Variable', sans-serif; }
        body { 
            background: black; 
            height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            overflow: hidden; 
            position: relative; 
            transition: background 1.5s ease-in-out; 
            flex-direction: column;
        }
        .name-box {
            position: absolute;
            top: 40%;
            left: 5%;
            background: rgba(255, 255, 255, 0.9);
            color: black;
            font-size: 22px; /* âœ… ê¸°ë³¸ ê¸€ì”¨ í¬ê¸° ì§€ì • */
            font-weight: bold;
            padding: 1vw 2.5vw;
            border-radius: 0;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }
        .dialogue-box {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90vw;
            max-width: 900px;
            padding: 4vw;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            font-size: 24px; /* âœ… ê¸°ë³¸ í¬ê¸° ì§€ì • (ê°€ë³€) */
            border-radius: 0;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            text-align: left;
            line-height: 2;
        }
        .action-text {
            color: #b0b0b0;
            font-style: italic;
            font-size: inherit; /* âœ… ê¸€ì”¨ í¬ê¸° ìœ ì§€ */
        }

        /* âœ… ëª¨ë°”ì¼ í™”ë©´ì—ì„œ ìµœì†Œ ê¸€ì”¨ í¬ê¸° ë³´ì¥ */
        @media (max-width: 600px) {
            .name-box {
                font-size: 18px; /* ìµœì†Œ í¬ê¸° ì„¤ì • */
            }
            .dialogue-box {
                font-size: 20px; /* ëª¨ë°”ì¼ì—ì„œ ìµœì†Œ í¬ê¸° ì ìš© */
            }
        }
    </style>
</head>
<body>

    <div id="nameBox" class="name-box"></div>
    <div id="dialogueBox" class="dialogue-box">
        <div id="textContent"></div>
    </div> 

    <audio id="clickSound" src="click.mp3"></audio>
    <audio id="bgm" src="bgm.mp3" loop></audio>

    <script>
        const clickSound = document.getElementById("clickSound");
        const bgm = document.getElementById("bgm");
        const dialogueBox = document.getElementById("dialogueBox");
        const nameBox = document.getElementById("nameBox");
        const textContent = document.getElementById("textContent");

        let scriptIndex = 0;
        let started = false;
        let intervalId;

        

        // ì¸í„°ë·° ìŠ¤í¬ë¦½íŠ¸ (ì´ë¦„, ëŒ€ì‚¬)
        const scriptTexts = [
            { role: "í–‰ë™ì§€ë¬¸", text: "ëŒ€í”¼ì†Œì˜ ë¬¸ì„ ì—´ê³ , ë°–ìœ¼ë¡œ ë‚˜ì„  ìš°ë¦¬ëŠ” ì•Œ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤." },
            { role: "í–‰ë™ì§€ë¬¸", text: "ìŸì•„ì§€ëŠ” ì…”í„°ìŒê³¼ ëª°ë ¤ë“œëŠ” ê¸°ìë“¤ì´ ìˆë‹¤ëŠ” ê²ƒìœ¼ë¡œ ë³´ì•„, ë°”ê¹¥ì€ ì´ ê°ì—¼ì²´ì œì™€ ë³„ê°œì˜ ì„¸ìƒìœ¼ë¡œ ë©€ì©¡íˆ ëŒì•„ê°€ê³  ìˆì—ˆë‹¤ëŠ” ê²ƒì„ìš”." },
            { role: "í–‰ë™ì§€ë¬¸", text: "ìˆ˜ë°± ëª…ì´ íŠ¹ì¢…ì„ ì–»ê¸° ìœ„í•´ ë‹¬ë ¤ë“¤ì–´, ìš°ë¦¬ë“¤ì„ ì—ì›ŒìŒ‰ë‹ˆë‹¤." },
            { role: "í–‰ë™ì§€ë¬¸", text: "ë‹¹í™©ê³¼ ë¶ˆì•ˆ ì‚¬ì´, ë“¤ë¦¬ëŠ” ì§ˆë¬¸ë“¤." },
            { role: "ê¸°ì", text: "ì¢€ë¹„ ì‚¬íƒœì˜ ì›ì¸ì´ ë­ë¼ê³  ìƒê°í•˜ì‹­ë‹ˆê¹Œ?" },
            { role: "ê¸°ì", text: "ì²«ë²ˆì§¸ ë¶€ì‘ìš©ì„ ì¼ìœ¼í‚¨ í•™ìƒì€ ëˆ„êµ¬ì˜€ìŠµë‹ˆê¹Œ?" },
            { role: "ê¸°ì", text: "ë™í–‰í•œ ì½”ì¹˜ì˜ í–‰ë°©ì„ ì•Œê³  ìˆìŠµë‹ˆê¹Œ?" },
            { role: "ê¸°ì", text: "ì‚´ì•„ë‚¨ê¸° ìœ„í•´ ë‹¤ë¥¸ í•™ìƒë“¤ì„ ì–´ë–¤ì‹ìœ¼ë¡œ ì²˜ë¦¬í–ˆìŠµë‹ˆê¹Œ?" },
            { role: "í–‰ë™ì§€ë¬¸", text: "ì•ë‹¤íˆ¬ì–´ í•˜ëŠ” ë§ë“¤ì€ ëª¨ë‘ ë¹„ìˆ˜ê°€ ë˜ì–´ ë²„ê²ê²Œ ìŸì•„ì ¸ ë‚´ë¦½ë‹ˆë‹¤." },
            { role: "í–‰ë™ì§€ë¬¸", text: "í˜¼ë€ì— ë¹ ì§„ ìš°ë¦¬ë“¤ì€, ì´ ìë¦¬ì— ë¬¶ì—¬ ì ì‹œ ìƒê°ì„ ì •ë¦¬í•´ ë´…ë‹ˆë‹¤." },
            { role: "í–‰ë™ì§€ë¬¸", text: "ê·¸ì¤‘, í•˜ë‚˜ê°€ ë¨¼ì € ì…ì„ ë–¼ì–´ ë§ì„ í•©ë‹ˆë‹¤." },
            { role: "A", text: "ì €í¬ëŠ” ì²œì„± ì¬ë‹¨ ì‹¤í—˜ì˜ ë¬´ê³ í•œ í”¼í•´ìì¸ë°ìš”." },
            { role: "A", text: "ê°ì„±ì œ ê°œë°œì„ ìœ„í•´ ì €í¬ë¥¼ ìƒì²´ ì‹¤í—˜ ëŒ€ìƒìœ¼ë¡œ ì´ìš©í•œ ê±°ì˜ˆìš”." },
            { role: "í–‰ë™ì§€ë¬¸", text: "ê·¸ëŸ¬ì, ë¬´ì„­ë„ë¡ ê³ ìš”í•œ ì •ì ì´ ì°¾ì•„ì˜µë‹ˆë‹¤." },
            { role: "í–‰ë™ì§€ë¬¸", text: "ìˆ˜ë°± ê°œì˜ ì•ˆêµ¬ê°€ ë‹¨ í•œ ì‚¬ëŒì„ í–¥í•´ ì¼ì œíˆ ëª¨ì—¬ë“¤ê³ , ì¢Œì¤‘ì€ ì¹¨ë¬µë§Œì´ ë§´ëŒ ë¿â€¦" },
            { role: "í–‰ë™ì§€ë¬¸", text: "â€¦.. ì†Œë¦„ë¼ì³." },
            { role: "í–‰ë™ì§€ë¬¸", text: "ê·¸ì¤‘ í•œ ê¸°ìê°€ ì¼ì‹œê°„ì˜ ì¹¨ë¬µì„ ê°€ë¥´ê³  ë‹¤ìŒ ì§ˆë¬¸ì„ ì´ì–´ë‚˜ê°‘ë‹ˆë‹¤." },
            { role: "ê¸°ì", text: "í•™ìƒë“¤ ì‚¬ì´ì—ì„œ ë²Œì–´ì§„ ë³€ì´ ê°ì—¼ì…ë‹ˆê¹Œ?" },
            { role: "ê¸°ì", text: "í‰ì†Œì— ë„í•‘ì„ ìˆ¨ê¸°ê³  ìˆì—ˆë˜ í•™ìƒì˜ ì†Œí–‰ì´ ì•„ë‹™ë‹ˆê¹Œ?" },
            { role: "í–‰ë™ì§€ë¬¸", text: "ì¥ë‚´ëŠ” ì—¬ì „íˆ ì¬ê°œí•œ ì…”í„° ì†Œë¦¬ì™€, ì·¨ì¬ë¥¼ ë¹™ìí•œ í­ì–¸ìœ¼ë¡œ ì†Œë€ìŠ¤ëŸ½ì§€ë§Œâ€¦ ìš°ë¦¬ëŠ” í•œìˆœê°„ì— ì•„ë“í•´ì§‘ë‹ˆë‹¤." },
            { role: "í–‰ë™ì§€ë¬¸", text: "ê·¸ ëˆ„ê°€ ìš°ë¦¬ì˜ ë§ì„ ë¯¿ì–´ ì¤„ê¹Œìš”." },
            { role: "í–‰ë™ì§€ë¬¸", text: "ëª¨ë‘ê°€ ì§„ì‹¤ì„ ë¬µì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤." },
            { role: "í–‰ë™ì§€ë¬¸", text: "ë¬¸ë“, í˜„ì‹¤ì„ ì§ë©´í•˜ëŠ” ê²Œ ë‘ë ¤ì›Œì§‘ë‹ˆë‹¤â€¦â€¦" },
            { role: "í–‰ë™ì§€ë¬¸", text: "* ë©”ì¸ ìŠ¤í† ë¦¬ ì§„í–‰ ê²Œì‹œë¬¼ë¡œ ëŒì•„ê°€ ì£¼ì„¸ìš”." }
        ];

        function startScene() {
            if (started) return;
            started = true;

            // ğŸ”¥ í•´ê²°: clickSoundë¥¼ ë°˜ë“œì‹œ ì‚¬ìš©ì ì•¡ì…˜ ë‚´ì—ì„œ ì‹¤í–‰
            clickSound.currentTime = 0; // ì²˜ìŒë¶€í„° ì¬ìƒ
            clickSound.volume = 1; // ğŸ”¥ ë³¼ë¥¨ì„ 100%ë¡œ ì„¤ì • (í˜¹ì‹œ 0ì¼ ê²½ìš° ëŒ€ë¹„)
            clickSound.play().then(() => {
                console.log("ğŸ”Š click.mp3 ì¬ìƒë¨!");
            }).catch(error => {
                console.log("âš ï¸ í´ë¦­ íš¨ê³¼ìŒ ìë™ ì¬ìƒ ì°¨ë‹¨ë¨:", error);
            });

            // ğŸ”¥ í•´ê²°: 0.5ì´ˆ í›„ BGM ì‹¤í–‰ (ì‚¬ìš©ì ì•¡ì…˜ ì´í›„ ì‹¤í–‰ë˜ë¯€ë¡œ ì°¨ë‹¨ë˜ì§€ ì•ŠìŒ)
            setTimeout(() => {
                bgm.volume = 1;
                bgm.play().catch(error => console.log("âš ï¸ BGM ìë™ ì¬ìƒ ì°¨ë‹¨ë¨:", error));
            }, 500);

            const img = new Image();
            img.src = "background3.gif";
            img.onload = () => {
                document.body.style.background = "url('background3.gif') no-repeat center center fixed";
                document.body.style.backgroundSize = "cover";
            };
            img.onerror = () => {
                document.body.style.background = "gray";
            };

            clickSound.play().catch(error => console.log("í´ë¦­ íš¨ê³¼ìŒ ìë™ ì¬ìƒ ì°¨ë‹¨ë¨:", error));
            setTimeout(() => {
                bgm.play().catch(error => console.log("BGM ìë™ ì¬ìƒ ì°¨ë‹¨ë¨:", error));
            }, 500);

            setTimeout(() => {
                dialogueBox.style.opacity = "1";
                scriptIndex = 0;
                updateDialogue();
                intervalId = setInterval(updateDialogue, 5000);
            }, 2000);
        }

        function updateDialogue() {
            if (scriptIndex < scriptTexts.length) {
                dialogueBox.style.opacity = "0";
                nameBox.style.opacity = "0";

                setTimeout(() => { 
                    const { role, text } = scriptTexts[scriptIndex];

                    if (role === "í–‰ë™ì§€ë¬¸") {
                        nameBox.style.opacity = "0";
                        textContent.innerHTML = `<span class="action-text">${text}</span>`;
                    } else {
                        nameBox.innerText = role;
                        nameBox.style.opacity = "1";
                        textContent.innerText = text;
                    }

                    if (text === "ê·¸ëŸ¬ì, ë¬´ì„­ë„ë¡ ê³ ìš”í•œ ì •ì ì´ ì°¾ì•„ì˜µë‹ˆë‹¤.") {
                        document.body.style.background = "url('background4.gif') no-repeat center center fixed";
                        document.body.style.backgroundSize = "cover";
                    }

                    dialogueBox.style.opacity = "1";
                }, 500); 

                scriptIndex++;
            } else {
                clearInterval(intervalId);
                setTimeout(() => {
                    dialogueBox.style.opacity = "0";
                    nameBox.style.opacity = "0";
                }, 3000);
            }
        }

        document.addEventListener("click", startScene, { once: true });
        document.addEventListener("touchstart", startScene, { once: true, passive: true });

    </script>
</body>
</html>
